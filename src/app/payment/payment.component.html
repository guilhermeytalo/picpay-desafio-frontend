<div class="toolbar">
    <img class="logo-white" src="/assets/images/logo-white.png"/>
    <div class="menu"><a [matMenuTriggerFor]="menu" ><img class="user-image" src="/assets/images/user.png"></a></div>
    <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="logOut()">Sair</button>
    </mat-menu>
</div>

<div class="background">
    <div class="container">
        <h1>Meus Pagamentos</h1>
        <br>
        <mat-form-field>
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtro">
        </mat-form-field>
        <button class="new-payment" mat-button (click)="openDialog()">Adicionar novo pagamento</button>
        <div class="mat-elevation-z8" >
            <table mat-table [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)">

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por Usuário"> Usuário </th>
                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                </ng-container>

                <ng-container matColumnDef="title">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por Título"> Título </th>
                    <td mat-cell *matCellDef="let element"> {{element.title}} </td>
                </ng-container>

                <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por Data"> Data </th>
                    <td mat-cell *matCellDef="let element"> {{formatDate(element.date)}} </td>
                </ng-container>

                <ng-container matColumnDef="value">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por Valor"> Valor </th>
                    <td mat-cell *matCellDef="let element"> R$ {{element.value}} </td>
                </ng-container>

                <ng-container matColumnDef="isPayed" >
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por Pagamento"> Pago </th>
                    <td mat-cell *matCellDef="let element">
                        <mat-checkbox [checked]="element.isPayed" disabled></mat-checkbox>
                    </td>
                </ng-container>

                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> Ações </th>
                    <td mat-cell *matCellDef="let row">
                        <mat-icon matSuffix (click)="openDialog(row, false)" class="action">{{'edit'}}</mat-icon>
                        <mat-icon matSuffix (click)="openDialog(row, true)" class="action">{{'delete'}}</mat-icon>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>

            <mat-paginator [pageSizeOptions]="[10, 20, 50]"
                           aria-label="Selecione uma Pagina de pagamentos">
            </mat-paginator>
        </div>
    </div>
</div>
